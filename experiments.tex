\chapter{Experimental Results}
\markright{Experimental Results}
\label{exp}
\phantomsection
%\addcontentsline{toc}{chapter}{experiments}

The proposed method has been tested to verify, besides the uniqueness of the watermark, its validity in terms of robustness and perceptual impact.\newline As said before, robustness is the ability of the watermark to cope with the degradation of the image due to compression, view synthesis etc.\newline 
Another important feature of a good watermarking method is perceptual transparency, such that human eye could not distinguish the dissimilarities between the watermarked image and the original one.\newline In this chapter will be presented the results carried out to test the algorithm performances.\newline


The marking process has been applied to a 1 minute stereo-video sequence created starting from the left and right view of the New Tsukuba dataset \cite{tsu}, with GOP of 60 frames and 30 fps.\newline 
Its been chosen to mark every 60 frames, i.e. only the I frame of each GOP.\newline 
The frames of the reference video has been marked with different power and new marked videos has been created with different levels of compression.\newline 

The compressed videos are made with the \texttt{ffmpeg} library \cite{ffmapeg}, changing the Constant Rate Factor (CRF), the default quality setting for the x264 encoder. The value can be set in a range between 0 and 51, where lower values would result in better quality (at the expense of higher file sizes). 

\section{Uniqueness of the watermark}

The first experiment we present aims to demonstrate the uniqueness of the watermark. We can say a mark is unique if the detector will present a significantly higher score only in correspondence of the reference watermark. Figures \ref{fig:Ll03}-\ref{fig:Lr06} show the response of the watermark detector to 100 randomly generated watermarks of which only one matches the reference watermark.  
\begin{figure*}[h!]
    \centering
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
       \includegraphics[width=0.8\textwidth]{./img/likelihood/correct_LikelihoodL_03.png}
          \caption{\small{detection on the left view}}
          \label{fig:Ll03}

    \end{subfigure}%
    ~ 
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
        \includegraphics[width=0.8\textwidth]{./img/likelihood/correct_LikelihoodLr_03.png}
           \caption{\small{detection on the right view}}
           \label{fig:Lr03}
    \end{subfigure}
    \caption{Detector response on the left and right views marked with power equal to 0.3}
\end{figure*}


\begin{figure*}[h!]
    \centering
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
\includegraphics[width=0.8\textwidth]{./img/likelihood/correct_LikelihoodL_06.png}
          \caption{\small{detection on the left view}}
\label{fig:Ll06}

    \end{subfigure}%
    ~ 
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
\includegraphics[width=0.8\textwidth]{./img/likelihood/correct_LikelihoodLr_06.png}
           \caption{\small{detection on the right view}}
\label{fig:Lr06}
    \end{subfigure}
    \caption{Detector response on the left and right views marked with power equal to 0.6}
\end{figure*}


\begin{figure*}[h!]
    \centering
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
\includegraphics[width=0.8\textwidth]{./img/likelihood/correct_LikelihoodL_NM.png}
          \caption{\small{detection on the left view}}
\label{fig:Llnm}

    \end{subfigure}%
    ~ 
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
\includegraphics[width=0.8\textwidth]{./img/likelihood/correct_LikelihoodLr_NM.png}
           \caption{\small{detection on the right view}}
\label{fig:Lrnm}
    \end{subfigure}
    \caption{Detector response on the left and right views where the images hasn't been marked}
\end{figure*}


\clearpage
It can be noted that the response due to the correct watermark is very much stronger with respect to the response to incorrect watermarks, suggesting that the algotithm has very low false positive (and false negative) response rate. This holds either for the left detection (figure \ref{fig:Ll03} and \ref{fig:Ll06}) and for the right detection(figure \ref{fig:Lr03} and \ref{fig:Lr06}). \newline Figures \ref{fig:Llnm} and  \ref{fig:Lrnm} prove that when the image under consideration doesn't contain the reference watermark the score array doesn't present any spikes.

\section{Robustness against compression attack}

In video analysis, compression is useful because it helps reduce resource usage, such as data storage space or transmission capacity.\newline This process is considered an attack since it brings to a degradation of the image due to the compression ratio, thus a degradation of the watermark.\newline 
This problem can be addressed improving the strenght of the embedded watermark, so it can resist the image degradation, but it is necessary to mantain an acceptable trade-off between robustness and the perceptual impact of the watermark. \newline

Figures \ref{fig:03crf1}-\ref{fig:06crf25} show the degradation of the image due to compression and watermark power.


\begin{figure}[h!]
\centering
\includegraphics[width=0.9\textwidth]{./img/03_crf1_gt.png}
\caption{\small{Stereo image from video marked with power 0.3 and compressed with crf equal to 1 }}
\label{fig:03crf1}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.9\textwidth]{./img/03_crf25_gt.png}
\caption{\small{Stereo image from video marked with power 0.3 and compressed with crf equal to 25 }}
\label{fig:03crf25}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.9\textwidth]{./img/03_crf30_gt.png}
\caption{\small{stereo image from video marked with power 0.3 and compressed with crf equal to 30 }}
\label{fig:03crf30}
\end{figure}


\begin{figure}[h!]
\centering
\includegraphics[width=0.9\textwidth]{./img/06_crf1_gt.png}
\caption{\small{Stereo image from video marked with power 0.6 and compressed with crf equal to 1 }}
\label{fig:06crf1}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.9\textwidth]{./img/06_crf25_gt.png}
\caption{\small{Stereo image from video marked with power 0.6 and compressed with crf equal to 25 }}
\label{fig:06crf25}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.9\textwidth]{./img/06_crf30_gt.png}
\caption{\small{stereo image from video marked with power 0.6 and compressed with crf equal to 30 }}
\label{fig:06crf30}
\end{figure}

\clearpage

In figures \ref{fig:03crf1}-\ref{fig:03crf30} the images has been marked with power equal to 0.3, we can see that this way the watermark does not affect the image and how the frames are degradated from the compression.

Yet in figures \ref{fig:06crf1}-\ref{fig:06crf30} it can be noted that when the power is equal to 0.6 the mark is perceptible and it become less visible the more the image is compressed. 


\subsection{Spatial watermarking robustness}

In spatial domain watermarking systems, the watermark is embedded directly in the spatial domain (pixel domain).\newline  Many of the spatial watermarking techniques provide simple and effective schemes for embedding an invisible watermark into an image, but are less robust to common attacks such as lossy compression.

The evaluation of this detection system has been studied through the ROC curve, which show the performance of a binary classifier system as its discrimination threshold is varied. The curve is created by plotting the true positive rate (TPR) against the false positive rate (FPR) at various threshold settings. The best possible prediction method would yield a point in the upper left corner or coordinate (0,1) of the ROC space, representing 100$\%$ sensitivity (no false negatives) and 100$\%$ specificity (no false positives). The (0,1) point is also called a perfect classification. A completely random guess would give a point along a diagonal line from the left bottom to the top right corners.

The results are in figures \ref{fig:g1crf1}-\ref{fig:g3crf30}.

\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_1_1.png}
\caption{\small{ROC curve of a spatial marked image with power equal to 1 and not compressed}}
\label{fig:g1crf1}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_1_15.png}
\caption{\small{ROC curve of a spatial marked image with power equal to 1 and compressed with crf 15}}
\label{fig:g1crf15}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_1_25.png}
\caption{\small{ROC curve of a spatial marked image with power equal to 1 and compressed with crf 25}}
\label{fig:g1crf25}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_1_30.png}
\caption{\small{ROC curve of a spatial marked image with power equal to 1 and compressed with crf 30}}
\label{fig:g1crf30}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_3_1.png}
\caption{\small{ROC curve of a spatial marked image with power equal to 3 and not compressed }}
\label{fig:g3crf1}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_3_15.png}
\caption{\small{ROC curve of a spatial marked image with power equal to 3 and compressed with crf 15 }}
\label{fig:g3crf15}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_3_25.png}
\caption{\small{ROC curve of a spatial marked image with power equal to 3 and compressed with crf 25 }}
\label{fig:g3crf25}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_3_30.png}
\caption{\small{ROC curve of a spatial marked image with power equal to 3 and compressed with crf 30 }}
\label{fig:g3crf30}
\end{figure}
\clearpage

The ROC functions above reveal that the more the image is compressed the more the classification is a random guess, but when the mark is added with power equal to 3 the compression doesn't affect the detection process.

\subsection{DFT watermaking robustess}

In transform domain watermarking systems, watermark insertion is done by transforming the image into the frequency domain using a discrete Fourier transform (DFT), full-image DCT, block-wise DCT, wavelet, Hadamard, Fourier-Mellin, or other transforms.\newline  It is often claimed that embedding in the transform domain is advantageous in terms of visibility and security.
 
Two studies are presented in this section: the first one concernes the power of the watermark needed in order to achieve robustness against different levels of compression; the latter focus on youtube, and tries to find the right power to achive robustness in a downloaded video.
 
Each test has been made with both the ground truth and graph-cuts disparities.
 
Tables \ref{tab:compgt}-\ref{tab:compkz} shows how the algorithm manage to find the watermark in a compressed video, in particular it is shown if the mark is detected in the left/right view or both images. The first table shows the results when the algorithm is used with the ground truth disparity, the second when using graph cuts.
\clearpage

\begin{table}[htbp]

 \begin{center}
 \scalebox{0.6}{ 
 \begin{tabular}{c|c|c c c }
 \hline\hline
 \multirow{1}{2.5cm}{\textbf{power}}&\multirow{1}{4cm}{\textbf{compression level}} & \multicolumn{1}{c}{\textbf{both}} & \multicolumn{1}{c}{\textbf{left}} & \multicolumn{1}{c}{\textbf{right}}\\ \hline
 
 0.3 & 1 & 30 & 0 & 0 \\
 0.3 & 15 & 30 & 0 & 0 \\
 0.3 & 25 & 10 & 5 & 0 \\
 0.3 & 30 & 1 & 1 & 0 \\
 0.6 & 1 & 30 & 0 & 0 \\
 0.6 & 15 & 30 & 0 & 0 \\
 0.6 & 25 & 28 & 0 & 0 \\
 0.6 & 30 & 16 & 2 & 0 \\
           
 \hline
 \end{tabular}
 }
 \caption{ detection table when ground truth disparity is used  \label{tab:compgt}}
 \end{center}
 \end{table}

\begin{table}[htbp]

 \begin{center}
 \scalebox{0.6}{ 
 \begin{tabular}{c|c|c c c }
 \hline\hline
 \multirow{1}{2.5cm}{\textbf{power}}&\multirow{1}{4cm}{\textbf{compression level}} & \multicolumn{1}{c}{\textbf{both}} & \multicolumn{1}{c}{\textbf{left}} & \multicolumn{1}{c}{\textbf{right}}\\ \hline
 
 0.3 & 1 & 30 & 0 & 0 \\
 0.3 & 15 & 29 & 1 & 0 \\
 0.3 & 25 & 11 & 1 & 0 \\
 0.3 & 30 & 2 & 1 & 0 \\
 0.5 & 1 & 30 & 0 & 0 \\
 0.5 & 15 & 30 & 0 & 0 \\
 0.5 & 25 & 24 & 2 & 0 \\
 0.5 & 30 & 9 & 2 & 0 \\
 0.6 & 1 & 30 & 0 & 0 \\
 0.6 & 15 & 30 & 0 & 0 \\
 0.6 & 25 & 26 & 1 & 1 \\
 0.6 & 30 & 15 & 4 & 0 \\
           
 \hline
 \end{tabular}
 }
 \caption{ detection table when graph cuts disparity is used \label{tab:compkz}}
 \end{center}
 \end{table}
 
One can notice that, at a global level, detection statistics gradually degrade with the compression ratio. The embedded watermark becomes hardly detectable at the crudest compression levels even with if embedded with a strong power. \newline From the results emerges that when the watermark power is grater than or equal to 0.5 the detection supports a compression level of 25 with good statistics.

Figures \ref{fig:03yt}-\ref{fig:08yt} show how the uploading and the subsequential download of a non compressed video on youtube degradates the image.\newline
 
\begin{figure}[h!]
\centering
\includegraphics[width=0.9\textwidth]{./img/yt_03_gt.png}
\caption{\small{Stereo image from video uploaded with power equal to 0.3 }}
\label{fig:03yt}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.9\textwidth]{./img/yt_06_gt.png}
\caption{\small{Stereo image from video uploaded with power equal to 0.6 }}
\label{fig:06yt}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.9\textwidth]{./img/yt_07_gt.png}
\caption{\small{Stereo image from video uploaded with power equal to 0.7 }}
\label{fig:07yt}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.9\textwidth]{./img/yt_08_gt.png}
\caption{\small{Stereo image from video uploaded with power equal to 0.8 }}
\label{fig:08yt}
\end{figure}
\clearpage

From the figures \ref{fig:03yt}-\ref{fig:08yt} it can be noted that as a consequence of the image degradation the watermark become less perceptible even when inserted with a high power. 

Tables \ref{tab:ytgt}-\ref{tab:ytkz} show how a video uploaded on youtube and subsequentially downloaded can preserve the watermark, respectively when the watermark is inserted with the ground truth disparity and with graph cuts.\newline
 
 
 \begin{table}[htbp]

  \begin{center}
  \scalebox{0.6}{ 
  \begin{tabular}{c|c c c }
  \hline\hline
  \multirow{1}{2.5cm}{\textbf{power}} & \multicolumn{1}{c}{\textbf{both}} & \multicolumn{1}{c}{\textbf{left}} & \multicolumn{1}{c}{\textbf{right}}\\ \hline
 0.3 & 1 & 0 & 0\\
 0.6 & 9 & 1 & 0\\
 0.7 & 12& 2 & 0\\
 0.8 & 16& 0 & 1\\ 
  \hline
  \end{tabular}
  }
  \caption{Detection statistic for a downloaded video marked with ground truth disparity\label{tab:ytgt}}
  \end{center}
  \end{table}
 
\begin{table}[htbp]
 
 \begin{center}
 \scalebox{0.6}{ 
 \begin{tabular}{c|c c c }
 \hline\hline
 \multirow{1}{2.5cm}{\textbf{power}} & \multicolumn{1}{c}{\textbf{both}} & \multicolumn{1}{c}{\textbf{left}} & \multicolumn{1}{c}{\textbf{right}}\\ \hline

0.3& 1& 0& 0\\
0.5& 6 & 1& 0\\
0.6& 11 & 0 & 0\\
 \hline
 \end{tabular}
 }
 \caption{Detection statistic for a downloaded video marked with graph cuts disparity\label{tab:ytkz}}
 \end{center}
 \end{table}
 \clearpage

\section{Robustness to View Synthesis}
 
In a second batch of experiments, we analyzed the impact of virtual view synthesis on the detection performances of our watermarking system.

View synthesis can be viewed as the interpolation of a virtual view from two reference views. The reference views are essentially warped to the virtual viewpoint based on depth information and the intrinsic and extrinsic camera parameters and merged together.\newline
The view synthesis process using depth itself may destroy the watermark, as a result, to achieve robustness against this process, it is important to design the watermarks inserted in the left and right views so that they nicely overlap after the warping operation and thereby complement each other rather than cancel one another. The same 3D point should always carry the same watermark sample wherever it is projected in a view; hence we used a disparity-coherent technique.

To conduct these experiments, we generated a number of intermediate synthetic views (figures \ref{fig:synt1/4}-\ref{fig:synt3/4}), equally spaced apart between the left (reference) view and the right one, using the code in [].\newline

\begin{figure}[h!]
\centering
\includegraphics[width=0.5\textwidth]{./img/synth_view1_25.png}
\caption{\small{Synthetized view at distance 1/4 of the baseline from the left image }}
\label{fig:synt1/4}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.5\textwidth]{./img/synth_view1_50.png}
\caption{\small{Synthetized view at distance 1/2 of the baseline from the left image }}
\label{fig:synt1/2}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.5\textwidth]{./img/synth_view1_75.png}
\caption{\small{Synthetized view at distance 3/4 of the baseline from the left image }}
\label{fig:synt3/4}
\end{figure}

The table \ref{tab:syntDFT} contains the results for the frequency marking: the first column is the distance between the left view and the synthetized one, in terms of fraction of the baseline, then its show in how many synthetized images the mark is detected.

\begin{table}[htbp]

 \begin{center}
 \scalebox{0.6}{ 
 \begin{tabular}{c|c c c }
 \hline\hline
 \multirow{1}{2.5cm}{\textbf{position}} & \multicolumn{1}{c}{\textbf{both}} & \multicolumn{1}{c}{\textbf{left}} & \multicolumn{1}{c}{\textbf{right}}\\ \hline

1/2 & 30& 0& 0\\
1/4 & 30& 0& 0\\
3/4 & 29 & 1 & 0\\
 \hline
 \end{tabular}
 }
 \caption{Detection in the syntetized views \label{tab:syntDFT}}
 \end{center}
 \end{table}
 
  
The same study is proposed for the spatial marking: from a video marked with additive gaussian noise have been generated three synthetized views for each pair of marked frames, respectively one in the middle and the other two at 1/4 and 3/4 of distance from the left.\newline The ROC curves in figures \ref{fig:g1vs25}-\ref{fig:g3vs75}  show the results for the different intermediate synthetic views.\newline 
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_synt_1_25.png}
\caption{\small{ROC curve of a synthetic view created at distance equal to baseline/4 marked with power equal to 1 }}
\label{fig:g1vs25}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_synt_1_50.png}
\caption{\small{ROC curve of a synthetic view created at distance equal to baseline/2 marked with power equal to 1 }}
\label{fig:g1vs50}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_synt_1_75.png}
\caption{\small{ROC curve of a synthetic view created at distance equal to baseline*3/4 marked with power equal to 1 }}
\label{fig:g1vs75}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_synt_3_25.png}
\caption{\small{ROC curve of a synthetic view created at distance equal to baseline/4 marked with power equal to 3 }}
\label{fig:g3vs25}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_synt_3_50.png}
\caption{\small{ROC curve of a synthetic view created at distance equal to baseline/2 marked with power equal to 3 }}
\label{fig:g3vs50}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[width=0.4\textwidth]{./img/ROC/ROC_gauss_synt_3_75.png}
\caption{\small{ROC curve of a synthetic view created at distance equal to baseline*3/4 marked with power equal to 3 }}
\label{fig:g3vs75}
\end{figure}
\clearpage
It can be noted that the detection statistics are very high in the synthetized views, either for the spatial and frequency technique; we can therefore expect the synthetized views to behave like the other against compression.\newline

Often with stereo watermarking, view synthesis can be a problem since it introduces non-rigid local geometric distortion that are not properly tackled by state-of-the art resynchronization mechanisms. Local geometric deformations destroys the synchronization necessary for the detection process to be succesful.

With the proposed method the detection of the watermark in the right view works by warping it according to the disparity; this way the resynchronization is an internal step of the detection process and it doesn't need side information to resynchronize the watermark, since the disparity can be estimated anytime from the received views.
\newline Therefore we can say that this strategy manages to achieve complete robustness to view synthesis.
\clearpage
\section{Perceptual impact}

As said in Chapter \ref{wat} the perceptual impact, i.e. the imperceptivity of the watermark to the human eye, has been measure with the metrics proposed by Chaminda et al.
Based on the fact that the edges/contours of the depth map can be considered for measuring structural degradation, it is proposed a metric which is a modified version of the SSIM metric. The metrics is supposed to be computed on the degradated view and the corresponding disparity map, in our case we measured either the degradataion on the left and right view.

Figure \ref{fig:sobel} gives graphical illustration of contour extraction in order to compute the RR metrics on the left view, in this case the image has been marked with power equal to 0.3 and it can be noted that this kind of watermarking doesn't affect the contours of the scene.
   


\begin{figure}[h!]
\centering
\begin{subfigure}[]{0.4\textwidth}
\centering
\includegraphics[width=0.9\textwidth]{./img/wat_left.png}
\caption{\label{fig:lw}}
\end{subfigure}
\begin{subfigure}[]{0.4\textwidth}
\centering
\includegraphics[width=0.9\textwidth]{./img/left_sobel.png}
\caption{\label{fig:lws}}
\end{subfigure}
\begin{subfigure}[]{0.4\textwidth}
\centering
\includegraphics[width=0.9\textwidth]{./img/right_wat.png}
\caption{\label{fig:wr}}
\end{subfigure}
\begin{subfigure}[]{0.4\textwidth}
\centering
\includegraphics[width=0.9\textwidth]{./img/right_sobel.png}
\caption{\label{fig:rws}}
\end{subfigure}
\begin{subfigure}[]{0.4\textwidth}
\centering
\includegraphics[width=0.9\textwidth]{./img/ldisp.png}
\caption{\label{fig:ld}}
\end{subfigure}
\begin{subfigure}[]{0.4\textwidth}
\centering
\includegraphics[width=0.9\textwidth]{./img/ldisp_sobel.png}
\caption{\label{fig:lds}}
\end{subfigure}
\begin{subfigure}[]{0.4\textwidth}
\centering
\includegraphics[width=0.9\textwidth]{./img/rdisp.png}
\caption{\label{fig:rd}}
\end{subfigure}
\begin{subfigure}[]{0.4\textwidth}
\centering
\includegraphics[width=0.9\textwidth]{./img/rdisp_sobel.png}
\caption{\label{rds}}
\end{subfigure}
\caption{\small{(a) Reference left image. (b) Extracted edge information from reference left image. (c) Watermarked left image. (d) Extracted edge information from the watermarked left image. (e) Left disparity map obtain from the non watermarked stereo pair. (f) Extracted edge information from the left disparity map obtain from the non watermarked stereo pair. (g)  Left disparity map obtain from the watermarked stereo pair.(h) Extracted edge information from the left disparity map obtain from the watermarked stereo pair. }\label{fig:sobel}}
\end{figure}
\clearpage

For different power of watermarking both the $MQ_{depth}$ and $MQ_{color}$ metrics are calculated, and in figures \ref{fig:qml}-\ref{fig:qmr} its shown the value of the quality measure with respect to the power of the embedded watermark. 

\begin{figure*}[h!]
    \centering
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
\includegraphics[width=1\textwidth]{./img/qm_left.png}
          \caption{\small{Color quality metrics on the left view}}
\label{fig:qmcl}

    \end{subfigure}%
    ~ 
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
\includegraphics[width=1\textwidth]{./img/qm_disp_left.png}
           \caption{\small{Color quality metrics on the right view}}
\label{fig:qmdl}
    \end{subfigure}
    \caption{Color Quality metrics}
    \label{fig:qml}
\end{figure*}

\begin{figure*}[h!]
    \centering
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
\includegraphics[width=1\textwidth]{./img/qm_right.png}
          \caption{\small{Depth quality metrics on the left view}}
\label{fig:qmcr}

    \end{subfigure}%
    ~ 
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
\includegraphics[width=1\textwidth]{./img/qm_disp_right.png}
           \caption{\small{Depth quality metrics on the right view}}
\label{fig:qmdr}
    \end{subfigure}
    \caption{Depth quality metrics }
        \label{fig:qmr}
\end{figure*}
\clearpage

In figures \ref{fig:qml}-\ref{fig:qmr} we can see how the quality metrics decrease when increasing the power of the watermark: it can be noted that the more the power of the watermark is high the more the quality of the perception is low, however with power lower the 0.6 the degradation mantain an acceptable level with respect to the value generated from the non marked image (power equal to 0).\newline

Another study has been conducted to evaluate the visual impact of the watermark: the average PSNR value has been computed between original and compressed videos (at diffent compression levels) and the corrispondent watermarked videos (with different values of the power).\\ 

PSNR is the ratio between the maximum possible power of a signal and the power of corrupting noise that affects the fidelity of its representation; it is usually expressed in terms of the logarithmic decibel scale (dB) and typical values for the PSNR in video compression and watermarking are between 30 and 50 dB.
The results of this study are shown in Table XX.\\
For each power value the PSNR between the original non compressed video and the watermarked video has been computed: the PSNR value decreases according to the increase of the power, as expected. This indicates that the quality of the watermarked videos is lower for higher power values, but also that the watermarked videos are more robust for higher power values. This analysis matches the one conducted with the quality metrics in \cite{QMETRICS}.\\
The Table XX contains also the PSNR


\begin{table}[htbp]
\begin{center}
\scalebox{0.6}{ 
\begin{tabularx}{\textwidth}{>{\centering\arraybackslash}X>{\centering\arraybackslash}X>{\centering\arraybackslash}X}
\hline \hline
Power & Compression Level & PSNR(dB) \\ \hline

0.3 & 1  & 46.0071 \\
& 15 		    & 41.7044 \\
& 25 		    & 38.5995 \\
& YT 		    & 38.9626 \\
& 30 		    & 36.4890 \\
 \hline\hline   					
0.5 & 1 & 45.9505 \\
& 15 		    & 41.5850 \\
& 25 		    & 38.4557 \\
& YT 		    & 38.9547\\
& 30 		    & 36.6090 \\ 
\hline\hline	
0.6& 1 & 45.9291 \\
& 15 		    & 41.5458 \\
& 25 		    & 38.4008 \\
& YT 		    & 38.9481 \\
& 30 		    & 36.3091 \\ 
\hline 
\end{tabularx}
 }
\caption{ \label{tab:psnr_wm}}
\end{center}
\end{table}

\section{Remarks}

In this chapter have been presented the experiments conducted to test the proposed watermarking technique.

First we proved the uniqueness of the watermark needed in order to have a reliable marking process.

The created stereo video sequence was than marked and compressed under different compression rates, to test the visibility of the watermark as well as its robustness against lossy compression.

Regarding the spatial technique it is shown that when the watermark is added with power equal to 1, it is preserved with acceptable statistic at a compression rate of 15; on the other hand when inserted with higher power (3 in this analysis), the detection statistics are optimal even for the crudest compression. 

The frequency watermarking proved to be robust up to a compression rate of 25, and that the degradation introduced by web uploading tends to erase the mark, so in order to cope with this kind of attack it is needed a higher embedding power.  

Another important feature to test was the robustness against view synthesis, which was confirm by the results, for both the spatial and frequency techniques.

Finally the quality of the transmitted video has been studied with RR quality metrics, and it emerges that the stereo frame degradation mantains a good value when marking with power lower than 0.6






